/* linenoise.c */
int linenoise_strcasecmp(const char *s1, const char *s2);
int linenoise_strncasecmp(const char *s1, const char *s2, int n);
size_t lino_util_defaultprevcharlen(const char *buf, size_t buf_len, size_t pos, size_t *col_len);
size_t lino_util_defaultnextcharlen(const char *buf, size_t buf_len, size_t pos, size_t *col_len);
size_t lino_util_defaultreadcode(int fd, char *buf, size_t buf_len, int *c);
void linenoiseSetEncodingFunctions(linenoisePrevCharLen *prevCharLenFunc, linenoiseNextCharLen *nextCharLenFunc, linenoiseReadCode *readCodeFunc);
size_t lino_util_columnpos(const char *buf, size_t buf_len, size_t pos);
size_t lino_util_columnposformultiline(const char *buf, size_t buf_len, size_t pos, size_t cols, size_t ini_pos);
void linenoiseMaskModeEnable(void);
void linenoiseMaskModeDisable(void);
void linenoiseSetMultiLine(int ml);
int lino_util_isunsupportedterm(void);
int lino_util_enablerawmode(int fd);
void lino_util_disablerawmode(int fd);
int lino_util_getcursorposition(int ifd, int ofd);
int lino_util_getcolumns(int ifd, int ofd);
void linenoiseClearScreen(void);
void lino_util_beep(void);
void lino_freecompletions(linenoiseCompletions *lc);
int lino_completeline(linenoiseState *ls, char *cbuf, size_t cbuf_len, int *c);
void linenoiseSetCompletionCallback(linenoiseCompletionCallback *fn);
void linenoiseSetHintsCallback(linenoiseHintsCallback *fn);
void linenoiseSetFreeHintsCallback(linenoiseFreeHintsCallback *fn);
void linenoiseAddCompletion(linenoiseCompletions *lc, const char *str);
void lino_appendbuf_init(LNAppendBuffer *ab);
void lino_appendbuf_append(LNAppendBuffer *ab, const char *s, int len);
void lino_appendbuf_destroy(LNAppendBuffer *ab);
void lino_refreshshowhints(LNAppendBuffer *ab, linenoiseState *l, int pcollen);
int lino_util_isansiescape(const char *buf, size_t buf_len, size_t *len);
size_t lino_util_prompttextcolumnlen(const char *prompt, size_t plen);
void lino_util_refreshsingleline(linenoiseState *l);
void lino_util_refreshmultiline(linenoiseState *l);
void lino_refreshline(linenoiseState *l);
int linenoiseEditInsert(linenoiseState *l, const char *cbuf, int clen);
void linenoiseEditMoveLeft(linenoiseState *l);
void linenoiseEditMoveRight(linenoiseState *l);
void linenoiseEditMoveHome(linenoiseState *l);
void linenoiseEditMoveEnd(linenoiseState *l);
void linenoiseEditHistoryNext(linenoiseState *l, int dir);
void linenoiseEditDelete(linenoiseState *l);
void linenoiseEditBackspace(linenoiseState *l);
void linenoiseEditDeletePrevWord(linenoiseState *l);
int linenoiseEdit(int stdin_fd, int stdout_fd, char *buf, size_t buflen, const char *prompt);
void linenoisePrintKeyCodes(void);
int lino_util_getraw(char *buf, size_t buflen, const char *prompt);
char *linenoiseNoTTY(void);
char *linenoise(const char *prompt);
void linenoiseFree(void *ptr);
void lino_freehistory(void);
void linenoiseAtExit(void);
int linenoiseHistoryAdd(const char *line);
int linenoiseHistorySetMaxLen(int len);
int linenoiseHistorySave(const char *filename);
int linenoiseHistoryLoad(const char *filename);
/* main.c */
static inline void nn_utf8iter_init(utf8iterator_t *iter, const char *ptr, uint32_t length);
static inline uint8_t nn_utf8iter_charsize(const char *character);
static inline uint32_t nn_utf8iter_converter(const char *character, uint8_t size);
static inline uint8_t nn_utf8iter_next(utf8iterator_t *iter);
static inline const char *nn_utf8iter_getchar(utf8iterator_t *iter);
static inline bool nn_value_isobject(NNValue v);
static inline NNObject *nn_value_asobject(NNValue v);
static inline bool nn_value_isobjtype(NNValue v, NNObjType t);
static inline bool nn_value_isnull(NNValue v);
static inline bool nn_value_isbool(NNValue v);
static inline bool nn_value_isnumber(NNValue v);
static inline bool nn_value_isstring(NNValue v);
static inline bool nn_value_isfuncnative(NNValue v);
static inline bool nn_value_isfuncscript(NNValue v);
static inline bool nn_value_isfuncclosure(NNValue v);
static inline bool nn_value_isfuncbound(NNValue v);
static inline bool nn_value_isclass(NNValue v);
static inline bool nn_value_isinstance(NNValue v);
static inline bool nn_value_isarray(NNValue v);
static inline bool nn_value_isdict(NNValue v);
static inline bool nn_value_isfile(NNValue v);
static inline bool nn_value_isrange(NNValue v);
static inline bool nn_value_ismodule(NNValue v);
static inline bool nn_value_iscallable(NNValue v);
static inline NNObjType nn_value_objtype(NNValue v);
static inline bool nn_value_asbool(NNValue v);
static inline double nn_value_asnumber(NNValue v);
static inline NNObjString *nn_value_asstring(NNValue v);
static inline NNObjFuncNative *nn_value_asfuncnative(NNValue v);
static inline NNObjFuncScript *nn_value_asfuncscript(NNValue v);
static inline NNObjFuncClosure *nn_value_asfuncclosure(NNValue v);
static inline NNObjClass *nn_value_asclass(NNValue v);
static inline NNObjInstance *nn_value_asinstance(NNValue v);
static inline NNObjFuncBound *nn_value_asfuncbound(NNValue v);
static inline NNObjSwitch *nn_value_asswitch(NNValue v);
static inline NNObjUserdata *nn_value_asuserdata(NNValue v);
static inline NNObjModule *nn_value_asmodule(NNValue v);
static inline NNObjArray *nn_value_asarray(NNValue v);
static inline NNObjDict *nn_value_asdict(NNValue v);
static inline NNObjFile *nn_value_asfile(NNValue v);
static inline NNObjRange *nn_value_asrange(NNValue v);
static inline NNValue nn_value_makenull(void);
static inline NNValue nn_value_makebool(bool b);
static inline NNValue nn_value_makenumber(double d);
static inline NNValue nn_value_makeint(int i);
static inline NNValue nn_value_fromobject_actual(NNObject *obj);
static inline NNValue nn_value_internstrlen(NNState *state, const char *str, size_t len);
static inline NNValue nn_value_internstr(NNState *state, const char *str);
NNValArray *nn_vallist_make(NNState *state);
void nn_vallist_destroy(NNValArray *list);
static inline size_t nn_vallist_count(NNValArray *list);
static inline NNValue *nn_vallist_data(NNValArray *list);
static inline NNValue nn_vallist_get(NNValArray *list, size_t idx);
static inline NNValue *nn_vallist_getp(NNValArray *list, size_t idx);
static inline void nn_vallist_mark(NNValArray *list);
static inline bool nn_vallist_push(NNValArray *list, NNValue value);
static inline bool nn_vallist_insert(NNValArray *list, NNValue val, size_t idx);
static inline bool nn_vallist_set(NNValArray *list, size_t idx, NNValue val);
static inline bool nn_vallist_pop(NNValArray *list, NNValue *dest);
static inline bool nn_vallist_removeatintern(NNValArray *list, unsigned int ix);
static inline bool nn_vallist_removeat(NNValArray *list, unsigned int ix);
static inline void nn_vallist_ensurecapacity(NNValArray *list, size_t needsize, NNValue fillval, bool first);
static inline NNValArray *nn_vallist_copy(NNValArray *list);
static inline void nn_vallist_setempty(NNValArray *list);
NNHashValTable *nn_tableval_make(NNState *state);
void nn_tableval_destroy(NNHashValTable *table);
NNHashValEntry *nn_tableval_findentrybyvalue(NNHashValTable *table, NNHashValEntry *entries, int capacity, NNValue key);
NNHashValEntry *nn_tableval_findentrybystr(NNHashValTable *table, NNHashValEntry *entries, int capacity, NNValue valkey, const char *kstr, size_t klen, uint32_t hash);
NNProperty *nn_tableval_getfieldbyvalue(NNHashValTable *table, NNValue key);
NNProperty *nn_tableval_getfieldbystr(NNHashValTable *table, NNValue valkey, const char *kstr, size_t klen, uint32_t hash);
NNProperty *nn_tableval_getfieldbyostr(NNHashValTable *table, NNObjString *str);
NNProperty *nn_tableval_getfieldbycstr(NNHashValTable *table, const char *kstr);
NNProperty *nn_tableval_getfield(NNHashValTable *table, NNValue key);
bool nn_tableval_get(NNHashValTable *table, NNValue key, NNValue *value);
void nn_tableval_adjustcapacity(NNHashValTable *table, int capacity);
bool nn_tableval_setwithtype(NNHashValTable *table, NNValue key, NNValue value, NNFieldType ftyp, bool keyisstring);
bool nn_tableval_set(NNHashValTable *table, NNValue key, NNValue value);
bool nn_tableval_delete(NNHashValTable *table, NNValue key);
void nn_tableval_addall(NNHashValTable *from, NNHashValTable *to);
void nn_tableval_importall(NNHashValTable *from, NNHashValTable *to);
void nn_tableval_copy(NNHashValTable *from, NNHashValTable *to);
NNObjString *nn_tableval_findstring(NNHashValTable *table, const char *chars, size_t length, uint32_t hash);
NNValue nn_tableval_findkey(NNHashValTable *table, NNValue value);
NNObjArray *nn_tableval_getkeys(NNHashValTable *table);
void nn_tableval_mark(NNState *state, NNHashValTable *table);
void nn_tableval_removewhites(NNState *state, NNHashValTable *table);
bool nn_valdict_init(NNState *state, NNHashPtrTable *dict, unsigned int initialcapacity, size_t ktsz, size_t vtsz);
void nn_valdict_deinit(NNHashPtrTable *dict);
NNHashPtrTable *nn_valdict_makedefault(NNState *state, size_t ktsz, size_t vtsz);
NNHashPtrTable *nn_valdict_makecapacity(NNState *state, unsigned int mincapacity, size_t ktsz, size_t vtsz);
void nn_valdict_destroy(NNHashPtrTable *dict);
static inline void nn_valdict_sethashfunction(NNHashPtrTable *dict, mcitemhashfn_t hashfn);
static inline void nn_valdict_setequalsfunction(NNHashPtrTable *dict, mcitemcomparefn_t equalsfn);
bool nn_valdict_setkvintern(NNHashPtrTable *dict, unsigned int cellix, unsigned long hash, void *key, void *value);
static inline bool nn_valdict_setkv(NNHashPtrTable *dict, void *key, void *value);
static inline void *nn_valdict_get(NNHashPtrTable *dict, void *key);
static inline void *nn_valdict_getkeyat(NNHashPtrTable *dict, unsigned int ix);
static inline void *nn_valdict_getvalueat(NNHashPtrTable *dict, unsigned int ix);
static inline unsigned int nn_valdict_getcapacity(NNHashPtrTable *dict);
static inline bool nn_valdict_setvalueat(NNHashPtrTable *dict, unsigned int ix, void *value);
static inline int nn_valdict_count(NNHashPtrTable *dict);
static inline bool nn_valdict_removebykey(NNHashPtrTable *dict, void *key);
static inline void nn_valdict_clear(NNHashPtrTable *dict);
static inline unsigned int nn_valdict_getcellindex(NNHashPtrTable *dict, void *key, unsigned long hash, bool *outfound);
static inline bool nn_valdict_growandrehash(NNHashPtrTable *dict);
bool nn_valdict_addall(NNHashPtrTable *to, NNHashPtrTable *from);
static inline bool nn_valdict_setkeyat(NNHashPtrTable *dict, unsigned int ix, void *key);
static inline bool nn_valdict_keysareequal(NNHashPtrTable *dict, void *a, void *b);
static inline unsigned long nn_valdict_hashkey(NNHashPtrTable *dict, void *key);
NNObject *nn_gcmem_protect(NNState *state, NNObject *object);
void nn_gcmem_clearprotect(NNState *state);
const char *nn_util_color(NNColor tc);
size_t nn_util_upperpowoftwo(size_t v);
size_t nn_util_hashdata(const void *ptr, size_t len);
char *nn_util_strndup(const char *src, size_t len);
char *nn_util_strdup(const char *src);
char *nn_util_readhandle(NNState *state, FILE *hnd, size_t *dlen);
char *nn_util_readfile(NNState *state, const char *filename, size_t *dlen);
int nn_util_utf8numbytes(int value);
char *nn_util_utf8encode(unsigned int code, size_t *dlen);
int nn_util_utf8decode(const uint8_t *bytes, uint32_t length);
char *nn_util_utf8codepoint(const char *str, char *outcodepoint);
char *nn_util_utf8strstr(const char *haystack, const char *needle);
char *nn_util_utf8index(char *s, int pos);
void nn_util_utf8slice(char *s, int *start, int *end);
char *nn_util_strtoupper(char *str, size_t length);
char *nn_util_strtolower(char *str, size_t length);
static inline void nn_state_apidebugv(NNState *state, const char *funcname, const char *format, va_list va);
static inline void nn_state_apidebug(NNState *state, const char *funcname, const char *format, ...);
static inline void nn_state_astdebugv(NNState *state, const char *funcname, const char *format, va_list va);
static inline void nn_state_astdebug(NNState *state, const char *funcname, const char *format, ...);
void nn_gcmem_maybecollect(NNState *state, int addsize, bool wasnew);
void *nn_gcmem_reallocate(NNState *state, void *pointer, size_t oldsize, size_t newsize);
void nn_gcmem_release(NNState *state, void *pointer, size_t oldsize);
void *nn_gcmem_allocate(NNState *state, size_t size, size_t amount);
void nn_gcmem_markobject(NNState *state, NNObject *object);
void nn_gcmem_markvalue(NNState *state, NNValue value);
void nn_gcmem_blackenobject(NNState *state, NNObject *object);
void nn_gcmem_destroyobject(NNState *state, NNObject *object);
void nn_gcmem_markroots(NNState *state);
void nn_gcmem_tracerefs(NNState *state);
void nn_gcmem_sweep(NNState *state);
void nn_gcmem_destroylinkedobjects(NNState *state);
void nn_gcmem_collectgarbage(NNState *state);
NNValue nn_argcheck_vfail(NNArgCheck *ch, const char *srcfile, int srcline, const char *fmt, va_list va);
NNValue nn_argcheck_fail(NNArgCheck *ch, const char *srcfile, int srcline, const char *fmt, ...);
void nn_argcheck_init(NNState *state, NNArgCheck *ch, NNArguments *args);
void nn_dbg_disasmblob(NNPrinter *pr, NNBlob *blob, const char *name);
void nn_dbg_printinstrname(NNPrinter *pr, const char *name);
int nn_dbg_printsimpleinstr(NNPrinter *pr, const char *name, int offset);
int nn_dbg_printconstinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
int nn_dbg_printpropertyinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
int nn_dbg_printshortinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
int nn_dbg_printbyteinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
int nn_dbg_printjumpinstr(NNPrinter *pr, const char *name, int sign, NNBlob *blob, int offset);
int nn_dbg_printtryinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
int nn_dbg_printinvokeinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
const char *nn_dbg_op2str(uint8_t instruc);
int nn_dbg_printclosureinstr(NNPrinter *pr, const char *name, NNBlob *blob, int offset);
int nn_dbg_printinstructionat(NNPrinter *pr, NNBlob *blob, int offset);
void nn_blob_init(NNState *state, NNBlob *blob);
void nn_blob_push(NNBlob *blob, NNInstruction ins);
void nn_blob_destroy(NNBlob *blob);
int nn_blob_pushconst(NNBlob *blob, NNValue value);
int nn_blob_pushargdefval(NNBlob *blob, NNValue value);
NNProperty nn_property_makewithpointer(NNState *state, NNValue val, NNFieldType type);
NNProperty nn_property_makewithgetset(NNState *state, NNValue val, NNValue getter, NNValue setter, NNFieldType type);
NNProperty nn_property_make(NNState *state, NNValue val, NNFieldType type);
void nn_tableval_print(NNState *state, NNPrinter *pr, NNHashValTable *table, const char *name);
void nn_printer_initvars(NNState *state, NNPrinter *pr, NNPrMode mode);
NNPrinter *nn_printer_makeundefined(NNState *state, NNPrMode mode);
NNPrinter *nn_printer_makeio(NNState *state, FILE *fh, bool shouldclose);
NNPrinter *nn_printer_makestring(NNState *state);
void nn_printer_makestackio(NNState *state, NNPrinter *pr, FILE *fh, bool shouldclose);
void nn_printer_makestackstring(NNState *state, NNPrinter *pr);
void nn_printer_destroy(NNPrinter *pr);
NNObjString *nn_printer_takestring(NNPrinter *pr);
bool nn_printer_writestringl(NNPrinter *pr, const char *estr, size_t elen);
bool nn_printer_writestring(NNPrinter *pr, const char *estr);
bool nn_printer_writechar(NNPrinter *pr, int b);
bool nn_printer_writeescapedchar(NNPrinter *pr, int ch);
bool nn_printer_writequotedstring(NNPrinter *pr, const char *str, size_t len, bool withquot);
bool nn_printer_vwritefmttostring(NNPrinter *pr, const char *fmt, va_list va);
bool nn_printer_vwritefmt(NNPrinter *pr, const char *fmt, va_list va);
bool nn_printer_printf(NNPrinter *pr, const char *fmt, ...);
void nn_printer_printfunction(NNPrinter *pr, NNObjFuncScript *func);
void nn_printer_printarray(NNPrinter *pr, NNObjArray *list);
void nn_printer_printdict(NNPrinter *pr, NNObjDict *dict);
void nn_printer_printfile(NNPrinter *pr, NNObjFile *file);
void nn_printer_printinstance(NNPrinter *pr, NNObjInstance *instance, bool invmethod);
void nn_printer_printobject(NNPrinter *pr, NNValue value, bool fixstring, bool invmethod);
void nn_printer_printnumber(NNPrinter *pr, NNValue value);
void nn_printer_printvalue(NNPrinter *pr, NNValue value, bool fixstring, bool invmethod);
NNObjString *nn_value_tostring(NNState *state, NNValue value);
const char *nn_value_objecttypename(NNObject *object);
const char *nn_value_typename(NNValue value);
bool nn_value_compobject(NNState *state, NNValue a, NNValue b);
bool nn_value_compare_actual(NNState *state, NNValue a, NNValue b);
bool nn_value_compare(NNState *state, NNValue a, NNValue b);
uint32_t nn_util_hashbits(uint64_t hash);
uint32_t nn_util_hashdouble(double value);
uint32_t nn_util_hashstring(const char *key, int length);
uint32_t nn_object_hashobject(NNObject *object);
uint32_t nn_value_hashvalue(NNValue value);
NNValue nn_value_findgreater(NNValue a, NNValue b);
void nn_value_sortvalues(NNState *state, NNValue *values, int count);
NNValue nn_value_copyvalue(NNState *state, NNValue value);
NNObject *nn_object_allocobject(NNState *state, size_t size, NNObjType type);
NNObjUserdata *nn_object_makeuserdata(NNState *state, void *pointer, const char *name);
NNObjModule *nn_module_make(NNState *state, const char *name, const char *file, bool imported);
void nn_module_destroy(NNState *state, NNObjModule *module);
void nn_module_setfilefield(NNState *state, NNObjModule *module);
NNObjSwitch *nn_object_makeswitch(NNState *state);
NNObjArray *nn_object_makearray(NNState *state);
NNObjRange *nn_object_makerange(NNState *state, int lower, int upper);
NNObjDict *nn_object_makedict(NNState *state);
NNObjFile *nn_object_makefile(NNState *state, FILE *handle, bool isstd, const char *path, const char *mode);
void nn_file_destroy(NNState *state, NNObjFile *file);
void nn_file_mark(NNState *state, NNObjFile *file);
NNObjFuncBound *nn_object_makefuncbound(NNState *state, NNValue receiver, NNObjFuncClosure *method);
NNObjClass *nn_object_makeclass(NNState *state, NNObjString *name, NNObjClass *parent);
void nn_class_destroy(NNState *state, NNObjClass *klass);
bool nn_class_inheritfrom(NNObjClass *subclass, NNObjClass *superclass);
bool nn_class_defproperty(NNObjClass *klass, NNObjString *cstrname, NNValue val);
bool nn_class_defcallablefieldptr(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function, void *uptr);
bool nn_class_defcallablefield(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function);
bool nn_class_defstaticcallablefieldptr(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function, void *uptr);
bool nn_class_defstaticcallablefield(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function);
bool nn_class_setstaticproperty(NNObjClass *klass, NNObjString *name, NNValue val);
bool nn_class_defnativeconstructorptr(NNState *state, NNObjClass *klass, NNNativeFN function, void *uptr);
bool nn_class_defnativeconstructor(NNState *state, NNObjClass *klass, NNNativeFN function);
bool nn_class_defmethod(NNState *state, NNObjClass *klass, NNObjString *name, NNValue val);
bool nn_class_defnativemethodptr(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function, void *ptr);
bool nn_class_defnativemethod(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function);
bool nn_class_defstaticnativemethodptr(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function, void *uptr);
bool nn_class_defstaticnativemethod(NNState *state, NNObjClass *klass, NNObjString *name, NNNativeFN function);
NNProperty *nn_class_getmethodfield(NNObjClass *klass, NNObjString *name);
NNProperty *nn_class_getpropertyfield(NNObjClass *klass, NNObjString *name);
NNProperty *nn_class_getstaticproperty(NNObjClass *klass, NNObjString *name);
NNProperty *nn_class_getstaticmethodfield(NNObjClass *klass, NNObjString *name);
NNObjInstance *nn_object_makeinstance(NNState *state, NNObjClass *klass);
void nn_instance_mark(NNState *state, NNObjInstance *instance);
void nn_instance_destroy(NNState *state, NNObjInstance *instance);
bool nn_instance_defproperty(NNObjInstance *instance, NNObjString *name, NNValue val);
NNObjFuncScript *nn_object_makefuncscript(NNState *state, NNObjModule *module, NNFuncType type);
void nn_funcscript_destroy(NNObjFuncScript *function);
NNObjFuncNative *nn_object_makefuncnative(NNState *state, NNNativeFN function, const char *name, void *uptr);
NNObjFuncClosure *nn_object_makefuncclosure(NNState *state, NNObjFuncScript *function);
NNObjString *nn_string_makefromstrbuf(NNState *state, StringBuffer *sbuf, uint32_t hash);
NNObjString *nn_string_allocstring(NNState *state, const char *estr, size_t elen, uint32_t hash, bool istaking, bool iscs);
size_t nn_string_getlength(NNObjString *os);
const char *nn_string_getdata(NNObjString *os);
const char *nn_string_getcstr(NNObjString *os);
void nn_string_destroy(NNState *state, NNObjString *str);
NNObjString *nn_string_takelen(NNState *state, char *chars, int length);
NNObjString *nn_string_takecstr(NNState *state, char *chars);
NNObjString *nn_string_copylen(NNState *state, const char *chars, int length);
NNObjString *nn_string_copycstr(NNState *state, const char *chars);
NNObjString *nn_string_copyobject(NNState *state, NNObjString *origos);
NNObjString *nn_string_internlen(NNState *state, const char *chars, int length);
NNObjString *nn_string_intern(NNState *state, const char *chars);
NNObjString *nn_string_copyobjstr(NNState *state, NNObjString *os);
NNObjUpvalue *nn_object_makeupvalue(NNState *state, NNValue *slot, int stackpos);
NNAstLexer *nn_astlex_init(NNState *state, const char *source);
void nn_astlex_destroy(NNState *state, NNAstLexer *lex);
bool nn_astlex_isatend(NNAstLexer *lex);
NNAstToken nn_astlex_maketoken(NNAstLexer *lex, NNAstTokType type);
NNAstToken nn_astlex_errortoken(NNAstLexer *lex, const char *fmt, ...);
bool nn_astutil_isdigit(char c);
bool nn_astutil_isbinary(char c);
bool nn_astutil_isalpha(char c);
bool nn_astutil_isoctal(char c);
bool nn_astutil_ishexadecimal(char c);
const char *nn_astutil_toktype2str(int t);
char nn_astlex_advance(NNAstLexer *lex);
bool nn_astlex_match(NNAstLexer *lex, char expected);
char nn_astlex_peekcurr(NNAstLexer *lex);
char nn_astlex_peekprev(NNAstLexer *lex);
char nn_astlex_peeknext(NNAstLexer *lex);
NNAstToken nn_astlex_skipblockcomments(NNAstLexer *lex);
NNAstToken nn_astlex_skipspace(NNAstLexer *lex);
NNAstToken nn_astlex_scanstring(NNAstLexer *lex, char quote, bool withtemplate);
NNAstToken nn_astlex_scannumber(NNAstLexer *lex);
NNAstTokType nn_astlex_getidenttype(NNAstLexer *lex);
NNAstToken nn_astlex_scanident(NNAstLexer *lex, bool isdollar);
NNAstToken nn_astlex_scandecorator(NNAstLexer *lex);
NNAstToken nn_astlex_scantoken(NNAstLexer *lex);
NNAstParser *nn_astparser_make(NNState *state, NNAstLexer *lexer, NNObjModule *module, bool keeplast);
void nn_astparser_destroy(NNAstParser *parser);
NNBlob *nn_astparser_currentblob(NNAstParser *prs);
bool nn_astparser_raiseerroratv(NNAstParser *prs, NNAstToken *t, const char *message, va_list args);
bool nn_astparser_raiseerror(NNAstParser *prs, const char *message, ...);
bool nn_astparser_raiseerroratcurrent(NNAstParser *prs, const char *message, ...);
void nn_astparser_advance(NNAstParser *prs);
bool nn_astparser_consume(NNAstParser *prs, NNAstTokType t, const char *message);
void nn_astparser_consumeor(NNAstParser *prs, const char *message, const NNAstTokType *ts, int count);
bool nn_astparser_checknumber(NNAstParser *prs);
bool nn_astparser_check(NNAstParser *prs, NNAstTokType t);
bool nn_astparser_match(NNAstParser *prs, NNAstTokType t);
void nn_astparser_runparser(NNAstParser *parser);
void nn_astparser_parsedeclaration(NNAstParser *prs);
void nn_astparser_parsestmt(NNAstParser *prs);
void nn_astparser_consumestmtend(NNAstParser *prs);
void nn_astparser_ignorewhitespace(NNAstParser *prs);
int nn_astparser_getcodeargscount(const NNInstruction *bytecode, const NNValue *constants, int ip);
void nn_astemit_emit(NNAstParser *prs, uint8_t byte, int line, bool isop);
void nn_astemit_patchat(NNAstParser *prs, size_t idx, uint8_t byte);
void nn_astemit_emitinstruc(NNAstParser *prs, uint8_t byte);
void nn_astemit_emit1byte(NNAstParser *prs, uint8_t byte);
void nn_astemit_emit1short(NNAstParser *prs, uint16_t byte);
void nn_astemit_emit2byte(NNAstParser *prs, uint8_t byte, uint8_t byte2);
void nn_astemit_emitbyteandshort(NNAstParser *prs, uint8_t byte, uint16_t byte2);
void nn_astemit_emitloop(NNAstParser *prs, int loopstart);
void nn_astemit_emitreturn(NNAstParser *prs);
int nn_astparser_pushconst(NNAstParser *prs, NNValue value);
void nn_astemit_emitconst(NNAstParser *prs, NNValue value);
int nn_astemit_emitjump(NNAstParser *prs, uint8_t instruction);
int nn_astemit_emitswitch(NNAstParser *prs);
int nn_astemit_emittry(NNAstParser *prs);
void nn_astemit_patchswitch(NNAstParser *prs, int offset, int constant);
void nn_astemit_patchtry(NNAstParser *prs, int offset, int type, int address, int finally);
void nn_astemit_patchjump(NNAstParser *prs, int offset);
void nn_astfunccompiler_init(NNAstParser *prs, NNAstFuncCompiler *compiler, NNFuncType type, bool isanon);
int nn_astparser_makeidentconst(NNAstParser *prs, NNAstToken *name);
bool nn_astparser_identsequal(NNAstToken *a, NNAstToken *b);
int nn_astfunccompiler_resolvelocal(NNAstParser *prs, NNAstFuncCompiler *compiler, NNAstToken *name);
int nn_astfunccompiler_addupvalue(NNAstParser *prs, NNAstFuncCompiler *compiler, uint16_t index, bool islocal);
int nn_astfunccompiler_resolveupvalue(NNAstParser *prs, NNAstFuncCompiler *compiler, NNAstToken *name);
int nn_astparser_addlocal(NNAstParser *prs, NNAstToken name);
void nn_astparser_declarevariable(NNAstParser *prs);
int nn_astparser_parsevariable(NNAstParser *prs, const char *message);
void nn_astparser_markinitialized(NNAstParser *prs);
void nn_astparser_definevariable(NNAstParser *prs, int global);
NNAstToken nn_astparser_synthtoken(const char *name);
NNObjFuncScript *nn_astparser_endcompiler(NNAstParser *prs);
void nn_astparser_scopebegin(NNAstParser *prs);
bool nn_astutil_scopeendcancontinue(NNAstParser *prs);
void nn_astparser_scopeend(NNAstParser *prs);
int nn_astparser_discardlocals(NNAstParser *prs, int depth);
void nn_astparser_endloop(NNAstParser *prs);
bool nn_astparser_rulebinary(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_rulecall(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_ruleliteral(NNAstParser *prs, bool canassign);
void nn_astparser_parseassign(NNAstParser *prs, uint8_t realop, uint8_t getop, uint8_t setop, int arg);
void nn_astparser_assignment(NNAstParser *prs, uint8_t getop, uint8_t setop, int arg, bool canassign);
bool nn_astparser_ruledot(NNAstParser *prs, NNAstToken previous, bool canassign);
void nn_astparser_namedvar(NNAstParser *prs, NNAstToken name, bool canassign);
void nn_astparser_createdvar(NNAstParser *prs, NNAstToken name);
bool nn_astparser_rulearray(NNAstParser *prs, bool canassign);
bool nn_astparser_ruledictionary(NNAstParser *prs, bool canassign);
bool nn_astparser_ruleindexing(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_rulevarnormal(NNAstParser *prs, bool canassign);
bool nn_astparser_rulevarglobal(NNAstParser *prs, bool canassign);
bool nn_astparser_rulethis(NNAstParser *prs, bool canassign);
bool nn_astparser_rulesuper(NNAstParser *prs, bool canassign);
bool nn_astparser_rulegrouping(NNAstParser *prs, bool canassign);
NNValue nn_astparser_compilenumber(NNAstParser *prs);
bool nn_astparser_rulenumber(NNAstParser *prs, bool canassign);
int nn_astparser_readhexdigit(char c);
int nn_astparser_readhexescape(NNAstParser *prs, const char *str, int index, int count);
int nn_astparser_readunicodeescape(NNAstParser *prs, char *string, const char *realstring, int numberbytes, int realindex, int index);
char *nn_astparser_compilestring(NNAstParser *prs, int *length);
bool nn_astparser_rulestring(NNAstParser *prs, bool canassign);
bool nn_astparser_ruleinterpolstring(NNAstParser *prs, bool canassign);
bool nn_astparser_ruleunary(NNAstParser *prs, bool canassign);
bool nn_astparser_ruleand(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_ruleor(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_ruleinstanceof(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_ruleconditional(NNAstParser *prs, NNAstToken previous, bool canassign);
bool nn_astparser_ruleimport(NNAstParser *prs, bool canassign);
bool nn_astparser_rulenew(NNAstParser *prs, bool canassign);
bool nn_astparser_ruletypeof(NNAstParser *prs, bool canassign);
bool nn_astparser_rulenothingprefix(NNAstParser *prs, bool canassign);
bool nn_astparser_rulenothinginfix(NNAstParser *prs, NNAstToken previous, bool canassign);
NNAstRule *nn_astparser_putrule(NNAstRule *dest, NNAstParsePrefixFN prefix, NNAstParseInfixFN infix, NNAstPrecedence precedence);
NNAstRule *nn_astparser_getrule(NNAstTokType type);
bool nn_astparser_doparseprecedence(NNAstParser *prs, NNAstPrecedence precedence);
bool nn_astparser_parseprecedence(NNAstParser *prs, NNAstPrecedence precedence);
bool nn_astparser_parseprecnoadvance(NNAstParser *prs, NNAstPrecedence precedence);
bool nn_astparser_parseexpression(NNAstParser *prs);
bool nn_astparser_parseblock(NNAstParser *prs);
void nn_astparser_declarefuncargvar(NNAstParser *prs);
int nn_astparser_parsefuncparamvar(NNAstParser *prs, const char *message);
uint8_t nn_astparser_parsefunccallargs(NNAstParser *prs);
void nn_astparser_parsefuncparamlist(NNAstParser *prs);
void nn_astfunccompiler_compilebody(NNAstParser *prs, NNAstFuncCompiler *compiler, bool closescope, bool isanon);
void nn_astparser_parsefuncfull(NNAstParser *prs, NNFuncType type, bool isanon);
void nn_astparser_parsemethod(NNAstParser *prs, NNAstToken classname, bool isstatic);
bool nn_astparser_ruleanonfunc(NNAstParser *prs, bool canassign);
bool nn_astparser_ruleanonclass(NNAstParser *prs, bool canassign);
void nn_astparser_parsefield(NNAstParser *prs, bool isstatic);
void nn_astparser_parsefuncdecl(NNAstParser *prs);
void nn_astparser_parseclassdeclaration(NNAstParser *prs, bool named);
void nn_astparser_parsevardecl(NNAstParser *prs, bool isinitializer);
void nn_astparser_parseexprstmt(NNAstParser *prs, bool isinitializer, bool semi);
void nn_astparser_parseforstmt(NNAstParser *prs);
void nn_astparser_parseforeachstmt(NNAstParser *prs);
void nn_astparser_parseswitchstmt(NNAstParser *prs);
void nn_astparser_parseifstmt(NNAstParser *prs);
void nn_astparser_parseechostmt(NNAstParser *prs);
void nn_astparser_parsethrowstmt(NNAstParser *prs);
void nn_astparser_parseassertstmt(NNAstParser *prs);
void nn_astparser_parsetrystmt(NNAstParser *prs);
void nn_astparser_parsereturnstmt(NNAstParser *prs);
void nn_astparser_parsewhilestmt(NNAstParser *prs);
void nn_astparser_parsedo_whilestmt(NNAstParser *prs);
void nn_astparser_parsecontinuestmt(NNAstParser *prs);
void nn_astparser_parsebreakstmt(NNAstParser *prs);
void nn_astparser_synchronize(NNAstParser *prs);
NNObjFuncScript *nn_astparser_compilesource(NNState *state, NNObjModule *module, const char *source, NNBlob *blob, bool fromimport, bool keeplast);
void nn_gcmem_markcompilerroots(NNState *state);
NNRegModule *nn_natmodule_load_null(NNState *state);
void nn_modfn_os_preloader(NNState *state);
NNValue nn_modfn_os_readdir(NNState *state, NNArguments *args);
NNRegModule *nn_natmodule_load_os(NNState *state);
NNValue nn_modfn_astscan_scan(NNState *state, NNArguments *args);
NNRegModule *nn_natmodule_load_astscan(NNState *state);
bool nn_import_loadnativemodule(NNState *state, NNModInitFN init_fn, char *importname, const char *source, void *dlw);
void nn_import_addnativemodule(NNState *state, NNObjModule *module, const char *as);
void nn_import_loadbuiltinmodules(NNState *state);
void nn_import_closemodule(void *hnd);
bool nn_util_fsfileexists(NNState *state, const char *filepath);
bool nn_util_fsfileistype(NNState *state, const char *filepath, int typ);
bool nn_util_fsfileisfile(NNState *state, const char *filepath);
bool nn_util_fsfileisdirectory(NNState *state, const char *filepath);
NNObjModule *nn_import_loadmodulescript(NNState *state, NNObjModule *intomodule, NNObjString *modulename);
char *nn_import_resolvepath(NNState *state, char *modulename, const char *currentfile, char *rootfile, bool isrelative);
char *nn_util_fsgetbasename(NNState *state, char *path);
NNValue nn_objfndict_length(NNState *state, NNArguments *args);
NNValue nn_objfndict_add(NNState *state, NNArguments *args);
NNValue nn_objfndict_set(NNState *state, NNArguments *args);
NNValue nn_objfndict_clear(NNState *state, NNArguments *args);
NNValue nn_objfndict_clone(NNState *state, NNArguments *args);
NNValue nn_objfndict_compact(NNState *state, NNArguments *args);
NNValue nn_objfndict_contains(NNState *state, NNArguments *args);
NNValue nn_objfndict_extend(NNState *state, NNArguments *args);
NNValue nn_objfndict_get(NNState *state, NNArguments *args);
NNValue nn_objfndict_keys(NNState *state, NNArguments *args);
NNValue nn_objfndict_values(NNState *state, NNArguments *args);
NNValue nn_objfndict_remove(NNState *state, NNArguments *args);
NNValue nn_objfndict_isempty(NNState *state, NNArguments *args);
NNValue nn_objfndict_findkey(NNState *state, NNArguments *args);
NNValue nn_objfndict_tolist(NNState *state, NNArguments *args);
NNValue nn_objfndict_iter(NNState *state, NNArguments *args);
NNValue nn_objfndict_itern(NNState *state, NNArguments *args);
NNValue nn_objfndict_each(NNState *state, NNArguments *args);
NNValue nn_objfndict_filter(NNState *state, NNArguments *args);
NNValue nn_objfndict_some(NNState *state, NNArguments *args);
NNValue nn_objfndict_every(NNState *state, NNArguments *args);
NNValue nn_objfndict_reduce(NNState *state, NNArguments *args);
int nn_fileobject_close(NNObjFile *file);
bool nn_fileobject_open(NNObjFile *file);
NNValue nn_objfnfile_constructor(NNState *state, NNArguments *args);
NNValue nn_objfnfile_exists(NNState *state, NNArguments *args);
NNValue nn_objfnfile_isfile(NNState *state, NNArguments *args);
NNValue nn_objfnfile_isdirectory(NNState *state, NNArguments *args);
NNValue nn_objfnfile_statstatic(NNState *state, NNArguments *args);
NNValue nn_objfnfile_close(NNState *state, NNArguments *args);
NNValue nn_objfnfile_open(NNState *state, NNArguments *args);
NNValue nn_objfnfile_isopen(NNState *state, NNArguments *args);
NNValue nn_objfnfile_isclosed(NNState *state, NNArguments *args);
bool nn_file_read(NNState *state, NNObjFile *file, size_t readhowmuch, NNIOResult *dest);
NNValue nn_objfnfile_read(NNState *state, NNArguments *args);
NNValue nn_objfnfile_get(NNState *state, NNArguments *args);
NNValue nn_objfnfile_gets(NNState *state, NNArguments *args);
NNValue nn_objfnfile_write(NNState *state, NNArguments *args);
NNValue nn_objfnfile_puts(NNState *state, NNArguments *args);
NNValue nn_objfnfile_printf(NNState *state, NNArguments *args);
NNValue nn_objfnfile_number(NNState *state, NNArguments *args);
NNValue nn_objfnfile_istty(NNState *state, NNArguments *args);
NNValue nn_objfnfile_flush(NNState *state, NNArguments *args);
void nn_util_statfilldictphysfile(NNState *state, NNObjDict *dict, struct stat *st);
NNValue nn_objfnfile_statmethod(NNState *state, NNArguments *args);
NNValue nn_objfnfile_path(NNState *state, NNArguments *args);
NNValue nn_objfnfile_mode(NNState *state, NNArguments *args);
NNValue nn_objfnfile_name(NNState *state, NNArguments *args);
NNValue nn_objfnfile_seek(NNState *state, NNArguments *args);
NNValue nn_objfnfile_tell(NNState *state, NNArguments *args);
NNObjArray *nn_array_makefilled(NNState *state, size_t cnt, NNValue filler);
NNObjArray *nn_array_make(NNState *state);
void nn_array_push(NNObjArray *list, NNValue value);
bool nn_array_get(NNObjArray *list, size_t idx, NNValue *vdest);
NNObjArray *nn_array_copy(NNObjArray *list, long start, long length);
NNValue nn_objfnarray_length(NNState *state, NNArguments *args);
NNValue nn_objfnarray_append(NNState *state, NNArguments *args);
NNValue nn_objfnarray_clear(NNState *state, NNArguments *args);
NNValue nn_objfnarray_clone(NNState *state, NNArguments *args);
NNValue nn_objfnarray_count(NNState *state, NNArguments *args);
NNValue nn_objfnarray_extend(NNState *state, NNArguments *args);
NNValue nn_objfnarray_indexof(NNState *state, NNArguments *args);
NNValue nn_objfnarray_insert(NNState *state, NNArguments *args);
NNValue nn_objfnarray_pop(NNState *state, NNArguments *args);
NNValue nn_objfnarray_shift(NNState *state, NNArguments *args);
NNValue nn_objfnarray_removeat(NNState *state, NNArguments *args);
NNValue nn_objfnarray_remove(NNState *state, NNArguments *args);
NNValue nn_objfnarray_reverse(NNState *state, NNArguments *args);
NNValue nn_objfnarray_sort(NNState *state, NNArguments *args);
NNValue nn_objfnarray_contains(NNState *state, NNArguments *args);
NNValue nn_objfnarray_delete(NNState *state, NNArguments *args);
NNValue nn_objfnarray_first(NNState *state, NNArguments *args);
NNValue nn_objfnarray_last(NNState *state, NNArguments *args);
NNValue nn_objfnarray_isempty(NNState *state, NNArguments *args);
NNValue nn_objfnarray_take(NNState *state, NNArguments *args);
NNValue nn_objfnarray_get(NNState *state, NNArguments *args);
NNValue nn_objfnarray_compact(NNState *state, NNArguments *args);
NNValue nn_objfnarray_unique(NNState *state, NNArguments *args);
NNValue nn_objfnarray_zip(NNState *state, NNArguments *args);
NNValue nn_objfnarray_zipfrom(NNState *state, NNArguments *args);
NNValue nn_objfnarray_todict(NNState *state, NNArguments *args);
NNValue nn_objfnarray_iter(NNState *state, NNArguments *args);
NNValue nn_objfnarray_itern(NNState *state, NNArguments *args);
NNValue nn_objfnarray_each(NNState *state, NNArguments *args);
NNValue nn_objfnarray_map(NNState *state, NNArguments *args);
NNValue nn_objfnarray_filter(NNState *state, NNArguments *args);
NNValue nn_objfnarray_some(NNState *state, NNArguments *args);
NNValue nn_objfnarray_every(NNState *state, NNArguments *args);
NNValue nn_objfnarray_reduce(NNState *state, NNArguments *args);
NNValue nn_objfnrange_lower(NNState *state, NNArguments *args);
NNValue nn_objfnrange_upper(NNState *state, NNArguments *args);
NNValue nn_objfnrange_range(NNState *state, NNArguments *args);
NNValue nn_objfnrange_iter(NNState *state, NNArguments *args);
NNValue nn_objfnrange_itern(NNState *state, NNArguments *args);
NNValue nn_objfnrange_loop(NNState *state, NNArguments *args);
NNValue nn_objfnrange_expand(NNState *state, NNArguments *args);
NNValue nn_objfnrange_constructor(NNState *state, NNArguments *args);
NNValue nn_objfnstring_utf8numbytes(NNState *state, NNArguments *args);
NNValue nn_objfnstring_utf8decode(NNState *state, NNArguments *args);
NNValue nn_objfnstring_utf8encode(NNState *state, NNArguments *args);
NNValue nn_util_stringutf8chars(NNState *state, NNArguments *args, bool onlycodepoint);
NNValue nn_objfnstring_utf8chars(NNState *state, NNArguments *args);
NNValue nn_objfnstring_utf8codepoints(NNState *state, NNArguments *args);
NNValue nn_objfnstring_fromcharcode(NNState *state, NNArguments *args);
NNValue nn_objfnstring_constructor(NNState *state, NNArguments *args);
NNValue nn_objfnstring_length(NNState *state, NNArguments *args);
NNValue nn_string_fromrange(NNState *state, const char *buf, int len);
NNObjString *nn_string_substring(NNState *state, NNObjString *selfstr, size_t start, size_t end, bool likejs);
NNValue nn_objfnstring_substring(NNState *state, NNArguments *args);
NNValue nn_objfnstring_charcodeat(NNState *state, NNArguments *args);
NNValue nn_objfnstring_charat(NNState *state, NNArguments *args);
NNValue nn_objfnstring_upper(NNState *state, NNArguments *args);
NNValue nn_objfnstring_lower(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isalpha(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isalnum(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isfloat(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isnumber(NNState *state, NNArguments *args);
NNValue nn_objfnstring_islower(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isupper(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isspace(NNState *state, NNArguments *args);
NNValue nn_objfnstring_trim(NNState *state, NNArguments *args);
NNValue nn_objfnstring_ltrim(NNState *state, NNArguments *args);
NNValue nn_objfnstring_rtrim(NNState *state, NNArguments *args);
NNValue nn_objfnarray_constructor(NNState *state, NNArguments *args);
NNValue nn_objfnarray_join(NNState *state, NNArguments *args);
NNValue nn_objfnstring_indexof(NNState *state, NNArguments *args);
NNValue nn_objfnstring_startswith(NNState *state, NNArguments *args);
NNValue nn_objfnstring_endswith(NNState *state, NNArguments *args);
NNValue nn_objfnstring_count(NNState *state, NNArguments *args);
NNValue nn_objfnstring_tonumber(NNState *state, NNArguments *args);
NNValue nn_objfnstring_isascii(NNState *state, NNArguments *args);
NNValue nn_objfnstring_tolist(NNState *state, NNArguments *args);
NNValue nn_objfnstring_lpad(NNState *state, NNArguments *args);
NNValue nn_objfnstring_rpad(NNState *state, NNArguments *args);
NNValue nn_objfnstring_split(NNState *state, NNArguments *args);
NNValue nn_objfnstring_replace(NNState *state, NNArguments *args);
NNValue nn_objfnstring_iter(NNState *state, NNArguments *args);
NNValue nn_objfnstring_itern(NNState *state, NNArguments *args);
NNValue nn_objfnstring_each(NNState *state, NNArguments *args);
NNValue nn_objfnobject_dump(NNState *state, NNArguments *args);
NNValue nn_objfnobject_tostring(NNState *state, NNArguments *args);
NNValue nn_objfnobject_typename(NNState *state, NNArguments *args);
NNValue nn_objfnobject_getselfclass(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isstring(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isarray(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isa(NNState *state, NNArguments *args);
NNValue nn_objfnobject_iscallable(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isbool(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isnumber(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isint(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isdict(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isobject(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isfunction(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isiterable(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isclass(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isfile(NNState *state, NNArguments *args);
NNValue nn_objfnobject_isinstance(NNState *state, NNArguments *args);
NNObjString *nn_util_numbertobinstring(NNState *state, long n);
NNObjString *nn_util_numbertooctstring(NNState *state, int64_t n, bool numeric);
NNObjString *nn_util_numbertohexstring(NNState *state, int64_t n, bool numeric);
NNValue nn_objfnnumber_tobinstring(NNState *state, NNArguments *args);
NNValue nn_objfnnumber_tooctstring(NNState *state, NNArguments *args);
NNValue nn_objfnnumber_tohexstring(NNState *state, NNArguments *args);
NNValue nn_objfnmath_abs(NNState *state, NNArguments *args);
NNValue nn_objfnmath_round(NNState *state, NNArguments *args);
NNValue nn_objfnmath_sqrt(NNState *state, NNArguments *args);
NNValue nn_objfnmath_ceil(NNState *state, NNArguments *args);
NNValue nn_objfnmath_floor(NNState *state, NNArguments *args);
NNValue nn_objfnmath_min(NNState *state, NNArguments *args);
NNValue nn_objfnprocess_exedirectory(NNState *state, NNArguments *args);
NNValue nn_objfnprocess_exit(NNState *state, NNArguments *args);
NNValue nn_objfnprocess_kill(NNState *state, NNArguments *args);
void nn_state_initbuiltinmethods(NNState *state);
NNValue nn_nativefn_time(NNState *state, NNArguments *args);
NNValue nn_nativefn_microtime(NNState *state, NNArguments *args);
NNValue nn_nativefn_id(NNState *state, NNArguments *args);
NNValue nn_nativefn_int(NNState *state, NNArguments *args);
NNValue nn_nativefn_chr(NNState *state, NNArguments *args);
NNValue nn_nativefn_ord(NNState *state, NNArguments *args);
void nn_util_mtseed(uint32_t seed, uint32_t *binst, uint32_t *index);
uint32_t nn_util_mtgenerate(uint32_t *binst, uint32_t *index);
double nn_util_mtrand(double lowerlimit, double upperlimit);
NNValue nn_nativefn_rand(NNState *state, NNArguments *args);
NNValue nn_nativefn_typeof(NNState *state, NNArguments *args);
NNValue nn_nativefn_eval(NNState *state, NNArguments *args);
NNValue nn_nativefn_instanceof(NNState *state, NNArguments *args);
void nn_strformat_init(NNState *state, NNFormatInfo *nfi, NNPrinter *writer, const char *fmtstr, size_t fmtlen);
void nn_strformat_destroy(NNFormatInfo *nfi);
bool nn_strformat_format(NNFormatInfo *nfi, int argc, int argbegin, NNValue *argv);
NNValue nn_nativefn_sprintf(NNState *state, NNArguments *args);
NNValue nn_nativefn_printf(NNState *state, NNArguments *args);
NNValue nn_nativefn_print(NNState *state, NNArguments *args);
NNValue nn_nativefn_println(NNState *state, NNArguments *args);
void nn_state_initbuiltinfunctions(NNState *state);
void nn_state_vwarn(NNState *state, const char *fmt, va_list va);
void nn_state_warn(NNState *state, const char *fmt, ...);
NNValue nn_exceptions_getstacktrace(NNState *state);
bool nn_exceptions_propagate(NNState *state);
bool nn_exceptions_pushhandler(NNState *state, NNObjClass *type, int address, int finallyaddress);
bool nn_exceptions_vthrowactual(NNState *state, NNObjClass *klass, const char *srcfile, int srcline, const char *format, va_list va);
bool nn_exceptions_throwactual(NNState *state, NNObjClass *klass, const char *srcfile, int srcline, const char *format, ...);
bool nn_exceptions_throwwithclass(NNState *state, NNObjClass *klass, const char *srcfile, int srcline, const char *format, ...);
bool nn_exceptions_vthrowwithclass(NNState *state, NNObjClass *exklass, const char *srcfile, int srcline, const char *format, va_list args);
static inline NNInstruction nn_util_makeinst(bool isop, uint8_t code, int srcline);
NNObjClass *nn_exceptions_makeclass(NNState *state, NNObjModule *module, const char *cstrname, bool iscs);
NNObjInstance *nn_exceptions_makeinstance(NNState *state, NNObjClass *exklass, const char *srcfile, int srcline, NNObjString *message);
void nn_vm_raisefatalerror(NNState *state, const char *format, ...);
bool nn_state_defglobalvalue(NNState *state, const char *name, NNValue val);
bool nn_state_defnativefunctionptr(NNState *state, const char *name, NNNativeFN fptr, void *uptr);
bool nn_state_defnativefunction(NNState *state, const char *name, NNNativeFN fptr);
NNObjClass *nn_util_makeclass(NNState *state, const char *name, NNObjClass *parent);
void nn_vm_initvmstate(NNState *state);
bool nn_vm_checkmayberesize(NNState *state);
bool nn_vm_resizestack(NNState *state, size_t needed);
bool nn_vm_resizeframes(NNState *state, size_t needed);
void nn_state_resetvmstate(NNState *state);
bool nn_state_addsearchpathobj(NNState *state, NNObjString *os);
bool nn_state_addsearchpath(NNState *state, const char *path);
void nn_state_buildprocessinfo(NNState *state);
NNState *nn_state_make(void);
NNState *nn_state_makewithuserptr(void *userptr);
void nn_state_destroy(NNState *state);
bool nn_util_methodisprivate(NNObjString *name);
bool nn_vm_callclosure(NNState *state, NNObjFuncClosure *closure, NNValue thisval, int argcount);
bool nn_vm_callnative(NNState *state, NNObjFuncNative *native, NNValue thisval, int argcount);
bool nn_vm_callvaluewithobject(NNState *state, NNValue callable, NNValue thisval, int argcount);
bool nn_vm_callvalue(NNState *state, NNValue callable, NNValue thisval, int argcount);
NNFuncType nn_value_getmethodtype(NNValue method);
NNObjClass *nn_value_getclassfor(NNState *state, NNValue receiver);
static inline void nn_vmbits_stackpush(NNState *state, NNValue value);
static inline void nn_vm_stackpush(NNState *state, NNValue value);
static inline NNValue nn_vmbits_stackpop(NNState *state);
static inline NNValue nn_vm_stackpop(NNState *state);
static inline NNValue nn_vmbits_stackpopn(NNState *state, int n);
static inline NNValue nn_vm_stackpopn(NNState *state, int n);
static inline NNValue nn_vmbits_stackpeek(NNState *state, int distance);
static inline NNValue nn_vm_stackpeek(NNState *state, int distance);
static inline uint8_t nn_vmbits_readbyte(NNState *state);
static inline NNInstruction nn_vmbits_readinstruction(NNState *state);
static inline uint16_t nn_vmbits_readshort(NNState *state);
static inline NNValue nn_vmbits_readconst(NNState *state);
static inline NNObjString *nn_vmbits_readstring(NNState *state);
static inline bool nn_vmutil_invokemethodfromclass(NNState *state, NNObjClass *klass, NNObjString *name, int argcount);
static inline bool nn_vmutil_invokemethodself(NNState *state, NNObjString *name, int argcount);
static inline bool nn_vmutil_invokemethod(NNState *state, NNObjString *name, int argcount);
static inline bool nn_vmutil_bindmethod(NNState *state, NNObjClass *klass, NNObjString *name);
static inline NNObjUpvalue *nn_vmutil_upvaluescapture(NNState *state, NNValue *local, int stackpos);
static inline void nn_vmutil_upvaluesclose(NNState *state, const NNValue *last);
static inline void nn_vmutil_definemethod(NNState *state, NNObjString *name);
static inline void nn_vmutil_defineproperty(NNState *state, NNObjString *name, bool isstatic);
bool nn_value_isfalse(NNValue value);
bool nn_util_isinstanceof(NNObjClass *klass1, NNObjClass *expected);
bool nn_dict_setentry(NNObjDict *dict, NNValue key, NNValue value);
void nn_dict_addentry(NNObjDict *dict, NNValue key, NNValue value);
void nn_dict_addentrycstr(NNObjDict *dict, const char *ckey, NNValue value);
NNProperty *nn_dict_getentry(NNObjDict *dict, NNValue key);
static inline NNObjString *nn_vmutil_multiplystring(NNState *state, NNObjString *str, double number);
static inline NNObjArray *nn_vmutil_combinearrays(NNState *state, NNObjArray *a, NNObjArray *b);
static inline void nn_vmutil_multiplyarray(NNState *state, NNObjArray *from, NNObjArray *newlist, size_t times);
static inline bool nn_vmutil_dogetrangedindexofarray(NNState *state, NNObjArray *list, bool willassign);
static inline bool nn_vmutil_dogetrangedindexofstring(NNState *state, NNObjString *string, bool willassign);
static inline bool nn_vmdo_getrangedindex(NNState *state);
static inline bool nn_vmutil_doindexgetdict(NNState *state, NNObjDict *dict, bool willassign);
static inline bool nn_vmutil_doindexgetmodule(NNState *state, NNObjModule *module, bool willassign);
static inline bool nn_vmutil_doindexgetstring(NNState *state, NNObjString *string, bool willassign);
static inline bool nn_vmutil_doindexgetarray(NNState *state, NNObjArray *list, bool willassign);
static inline bool nn_vmdo_indexget(NNState *state);
static inline bool nn_vmutil_dosetindexdict(NNState *state, NNObjDict *dict, NNValue index, NNValue value);
static inline bool nn_vmutil_dosetindexmodule(NNState *state, NNObjModule *module, NNValue index, NNValue value);
static inline bool nn_vmutil_doindexsetarray(NNState *state, NNObjArray *list, NNValue index, NNValue value);
static inline bool nn_vmutil_dosetindexstring(NNState *state, NNObjString *os, NNValue index, NNValue value);
static inline bool nn_vmdo_indexset(NNState *state);
static inline bool nn_vmutil_concatenate(NNState *state);
static inline double nn_vmutil_floordiv(double a, double b);
static inline double nn_vmutil_modulo(double a, double b);
static inline NNProperty *nn_vmutil_getproperty(NNState *state, NNValue peeked, NNObjString *name);
static inline bool nn_vmdo_propertyget(NNState *state);
static inline bool nn_vmdo_propertygetself(NNState *state);
static inline bool nn_vmdo_propertyset(NNState *state);
static inline double nn_vmutil_valtonum(NNValue v);
static inline uint32_t nn_vmutil_valtouint(NNValue v);
static inline long nn_vmutil_valtoint(NNValue v);
static inline bool nn_vmdo_dobinarydirect(NNState *state);
static inline bool nn_vmdo_globaldefine(NNState *state);
static inline bool nn_vmdo_globalget(NNState *state);
static inline bool nn_vmdo_globalset(NNState *state);
static inline bool nn_vmdo_localget(NNState *state);
static inline bool nn_vmdo_localset(NNState *state);
static inline bool nn_vmdo_funcargget(NNState *state);
static inline bool nn_vmdo_funcargset(NNState *state);
static inline bool nn_vmdo_makeclosure(NNState *state);
static inline bool nn_vmdo_makearray(NNState *state);
static inline bool nn_vmdo_makedict(NNState *state);
static inline bool nn_vmdo_dobinaryfunc(NNState *state, const char *opname, nnbinopfunc_t op);
void nn_vmdebug_printvalue(NNState *state, NNValue val, const char *fmt, ...);
NNStatus nn_vm_runvm(NNState *state, int exitframe, NNValue *rv);
int nn_nestcall_prepare(NNState *state, NNValue callable, NNValue mthobj, NNObjArray *callarr);
bool nn_nestcall_callfunction(NNState *state, NNValue callable, NNValue thisval, NNObjArray *args, NNValue *dest);
NNObjFuncClosure *nn_state_compilesource(NNState *state, NNObjModule *module, bool fromeval, const char *source);
NNStatus nn_state_execsource(NNState *state, NNObjModule *module, const char *source, const char *filename, NNValue *dest);
NNValue nn_state_evalsource(NNState *state, const char *source);
char *nn_cli_getinput(const char *prompt);
void nn_cli_addhistoryline(const char *line);
void nn_cli_freeline(char *line);
bool nn_cli_repl(NNState *state);
bool nn_cli_runfile(NNState *state, const char *file);
bool nn_cli_runcode(NNState *state, char *source);
int nn_util_findfirstpos(const char *str, size_t len, int ch);
void nn_cli_parseenv(NNState *state, char **envp);
void nn_cli_printtypesizes(void);
void optprs_fprintmaybearg(FILE *out, const char *begin, const char *flagname, size_t flaglen, bool needval, bool maybeval, const char *delim);
void optprs_fprintusage(FILE *out, optlongflags_t *flags);
void nn_cli_showusage(char *argv[], optlongflags_t *flags, bool fail);
int main(int argc, char *argv[], char **envp);
/* mem.c */
void *nn_memory_malloc(size_t sz);
void *nn_memory_realloc(void *p, size_t nsz);
void *nn_memory_calloc(size_t count, size_t typsize);
void nn_memory_free(void *ptr);
/* optparse.c */
int optprs_makeerror(optcontext_t *ox, const char *msg, const char *data);
bool optbits_isdashdash(const char *arg);
bool optbits_isshortopt(const char *arg);
bool optbits_islongopt(const char *arg);
void optbits_permute(optcontext_t *ox, int index);
int optbits_getargtype(const char *optstring, char c);
bool optbits_islongoptsend(const optlongflags_t *longopts, int i);
void optbits_fromlong(const optlongflags_t *longopts, char *optstring);
bool optbits_matchlongopts(const char *longname, const char *option);
char *optbits_getlongoptsarg(char *option);
int optbits_longfallback(optcontext_t *ox, const optlongflags_t *longopts, int *longindex);
void optprs_init(optcontext_t *ox, int argc, char **argv);
int optprs_nextshortflag(optcontext_t *ox, const char *optstring);
int optprs_nextlongflag(optcontext_t *ox, const optlongflags_t *longopts, int *longindex);
char *optprs_nextpositional(optcontext_t *ox);
/* os.c */
char *osfn_utilstrndup(const char *src, size_t len);
char *osfn_utilstrdup(const char *src);
bool fslib_diropen(FSDirReader *rd, const char *path);
bool fslib_dirread(FSDirReader *rd, FSDirItem *itm);
bool fslib_dirclose(FSDirReader *rd);
FILE *osfn_popen(const char *cmd, const char *type);
void osfn_pclose(FILE *fh);
int osfn_chmod(const char *path, int mode);
char *osfn_realpath(const char *path, char *respath);
char *osfn_dirname(const char *path);
char *osfn_fallbackbasename(const char *opath);
char *osfn_basename(const char *path);
int osfn_isatty(int fd);
int osfn_symlink(const char *path1, const char *path2);
int osfn_symlinkat(const char *path1, int fd, const char *path2);
char *osfn_getcwd(char *buf, size_t size);
int osfn_lstat(const char *path, struct stat *buf);
int osfn_truncate(const char *path, size_t length);
unsigned int osfn_sleep(unsigned int seconds);
int osfn_gettimeofday(struct timeval *tp, void *tzp);
int osfn_mkdir(const char *path, size_t mode);
int osfn_chdir(const char *path);
int osfn_getpid(void);
int osfn_kill(int pid, int code);
/* strbuf.c */
size_t dyn_strutil_rndup2pow64(uint64_t x);
char *dyn_strutil_safencpy(char *dst, const char *src, size_t n);
size_t dyn_strutil_splitstr(char *str, char sep, char **ptrs, size_t nptrs);
size_t dyn_strutil_charreplace(char *str, char from, char to);
void dyn_strutil_reverseregion(char *str, size_t length);
bool dyn_strutil_isallspace(const char *s);
char *dyn_strutil_nextspace(char *s);
char *dyn_strutil_trim(char *str);
size_t dyn_strutil_chomp(char *str, size_t len);
size_t dyn_strutil_countchar(const char *str, char c);
size_t dyn_strutil_split(const char *splitat, const char *sourcetxt, char ***result);
void dyn_strutil_callboundscheckinsert(const StringBuffer *sbuf, size_t pos, const char *file, int line);
void dyn_strutil_callboundscheckreadrange(const StringBuffer *sbuf, size_t start, size_t len, const char *file, int line);
void dyn_strbuf_convertfromintern(StringBuffer *sbuf);
StringBuffer *dyn_strbuf_makefromptr(StringBuffer *sbuf, size_t len);
bool dyn_strbuf_initbasicempty(StringBuffer *sbuf, size_t len, bool isintern, bool onstack);
bool dyn_strbuf_makebasicemptystack(StringBuffer *sbuf, size_t len, bool isintern);
StringBuffer *dyn_strbuf_makebasicempty(size_t len, bool isintern);
bool dyn_strbuf_destroy(StringBuffer *sb);
bool dyn_strbuf_destroyfromptr(StringBuffer *sb);
StringBuffer *dyn_strbuf_makefromstring(const char *str, size_t slen, bool isintern);
StringBuffer *dyn_strbuf_makeclone(const StringBuffer *sbuf);
void dyn_strbuf_reset(StringBuffer *sb);
void dyn_strutil_cbufcapacity(char **buf, size_t *sizeptr, size_t len);
void dyn_strutil_cbufappendchar(char **buf, size_t *lenptr, size_t *sizeptr, char c);
bool dyn_strbuf_resize(StringBuffer *sbuf, size_t newlen);
void dyn_strbuf_ensurecapacity(StringBuffer *sb, size_t len);
void dyn_strbuf_ensurecapacityupdateptr(StringBuffer *sbuf, size_t size, const char **ptr);
bool dyn_strbuf_containschar(StringBuffer *sb, char ch);
void dyn_strutil_faststrncat(char *dest, const char *src, size_t *size);
size_t dyn_strutil_strreplace1(char **str, size_t selflen, const char *findstr, size_t findlen, const char *substr, size_t sublen);
size_t dyn_strutil_strrepcount(const char *str, size_t slen, const char *findstr, size_t findlen, size_t sublen);
void dyn_strutil_strreplace2(char *target, size_t tgtlen, const char *findstr, size_t findlen, const char *substr, size_t sublen);
bool dyn_strbuf_fullreplace(StringBuffer *sb, const char *findstr, size_t findlen, const char *substr, size_t sublen);
bool dyn_strutil_inpreplhelper(char *dest, const char *src, size_t srclen, int findme, const char *substr, size_t sublen, size_t maxlen, size_t *dlen);
size_t dyn_strutil_inpreplace(char *target, size_t tgtlen, int findme, const char *substr, size_t sublen, size_t maxlen);
bool dyn_strbuf_charreplace(StringBuffer *sb, int findme, const char *substr, size_t sublen);
void dyn_strbuf_set(StringBuffer *sb, const char *str);
void dyn_strbuf_setbuff(StringBuffer *dest, StringBuffer *from);
bool dyn_strbuf_appendchar(StringBuffer *sb, int c);
bool dyn_strbuf_appendstrn(StringBuffer *sb, const char *str, size_t len);
bool dyn_strbuf_appendstr(StringBuffer *sb, const char *str);
bool dyn_strbuf_appendbuff(StringBuffer *sb1, const StringBuffer *sb2);
size_t dyn_strutil_numofdigits(unsigned long v);
bool dyn_strbuf_appendnumulong(StringBuffer *buf, unsigned long value);
bool dyn_strbuf_appendnumlong(StringBuffer *buf, long value);
bool dyn_strbuf_appendnumint(StringBuffer *buf, int value);
bool dyn_strbuf_appendstrnlowercase(StringBuffer *buf, const char *str, size_t len);
bool dyn_strbuf_appendstrnuppercase(StringBuffer *buf, const char *str, size_t len);
bool dyn_strbuf_appendcharn(StringBuffer *buf, char c, size_t n);
void dyn_strbuf_shrink(StringBuffer *sb, size_t len);
size_t dyn_strbuf_chomp(StringBuffer *sbuf);
void dyn_strbuf_reverse(StringBuffer *sbuf);
char *dyn_strbuf_substr(const StringBuffer *sbuf, size_t start, size_t len);
void dyn_strbuf_touppercase(StringBuffer *sbuf);
void dyn_strbuf_tolowercase(StringBuffer *sbuf);
void dyn_strbuf_copyover(StringBuffer *dst, size_t dstpos, const char *src, size_t len);
void dyn_strbuf_insert(StringBuffer *dst, size_t dstpos, const char *src, size_t len);
void dyn_strbuf_overwrite(StringBuffer *dst, size_t dstpos, size_t dstlen, const char *src, size_t srclen);
void dyn_strbuf_erase(StringBuffer *sbuf, size_t pos, size_t len);
int dyn_strbuf_appendformatposv(StringBuffer *sbuf, size_t pos, const char *fmt, va_list argptr);
int dyn_strbuf_appendformatv(StringBuffer *sbuf, const char *fmt, va_list argptr);
int dyn_strbuf_appendformat(StringBuffer *sbuf, const char *fmt, ...);
int dyn_strbuf_appendformatat(StringBuffer *sbuf, size_t pos, const char *fmt, ...);
int dyn_strbuf_appendformatnoterm(StringBuffer *sbuf, size_t pos, const char *fmt, ...);
void dyn_strbuf_triminplace(StringBuffer *sbuf);
void dyn_strbuf_trimleftinplace(StringBuffer *sbuf, const char *list);
void dyn_strbuf_trimrightinplace(StringBuffer *sbuf, const char *list);
/* dictvaldict.h */
/* hashtabval.h */
/* linenoise.h */
/* mem.h */
/* optparse.h */
/* os.h */
/* strbuf.h */
/* vallist.h */
